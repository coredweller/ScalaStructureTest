# Application secret â€” MUST be overridden in production via APP_SECRET env var
play.http.secret.key = "changeme"
play.http.secret.key = ${?APP_SECRET}

# Compile-time DI loader
play.application.loader = "loader.AppLoader"

# Allowed hosts (restrict in production)
play.filters.hosts {
  allowed = ["localhost", "127.0.0.1", ${?APP_HOST}]
}

# CORS
play.filters.cors {
  allowedOrigins = ["http://localhost:4200"]
  allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allowedHttpHeaders = ["Accept", "Content-Type", "Authorization"]
}

# HTTP filters applied in order
play.filters.enabled += "play.filters.hosts.AllowedHostsFilter"
play.filters.enabled += "play.filters.cors.CORSFilter"
play.filters.enabled += "play.filters.csrf.CSRFFilter"
play.filters.enabled += "play.filters.headers.SecurityHeadersFilter"

# Thread pool for blocking I/O (if needed)
contexts {
  database {
    executor = "thread-pool-executor"
    throughput = 1
    thread-pool-executor {
      fixed-pool-size = 32
    }
  }
}
